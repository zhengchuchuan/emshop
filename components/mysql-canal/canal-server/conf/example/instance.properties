# MySQL 连接配置
canal.instance.master.address=mysql:3306
canal.instance.master.journal.name=
canal.instance.master.position=
canal.instance.master.timestamp=
canal.instance.master.gtid=

# MySQL 从库配置 (可选)
canal.instance.standby.address=
canal.instance.standby.journal.name=
canal.instance.standby.position=
canal.instance.standby.timestamp=
canal.instance.standby.gtid=

# MySQL 用户配置
canal.instance.dbUsername=root
canal.instance.dbPassword=root
canal.instance.connectionCharset=UTF-8
canal.instance.enableDruid=false

# 实例配置
canal.instance.defaultDatabaseName=emshop
# 监听goods服务相关表
canal.instance.filter.regex=emshop\\.goods,emshop\\.brands,emshop\\.category,emshop\\.category_brand,emshop\\.banner

# RocketMQ 主题配置 - 统一使用goods-binlog-topic
canal.mq.topic=goods-binlog-topic
# 为不同表配置专门的topic分区
canal.mq.dynamicTopic=emshop.goods:goods-binlog-topic,emshop.brands:goods-binlog-topic,emshop.category:goods-binlog-topic,emshop.category_brand:goods-binlog-topic,emshop.banner:goods-binlog-topic

# 表级别主题配置 (可选，更细粒度控制)
# canal.mq.dynamicTopicPartition=emshop_goods_srv.goods:canal-goods:0,emshop_inventory_srv.inventory:canal-inventory:0

# 消息格式配置
canal.instance.filter.druid.ddl=true
canal.instance.filter.query.dcl=false
canal.instance.filter.query.dml=false
canal.instance.filter.query.ddl=false
canal.instance.filter.table.error=false
canal.instance.filter.rows=false
canal.instance.filter.transaction.entry=false

# 内存队列配置
canal.instance.memory.buffer.size=16384
canal.instance.memory.buffer.memunit=1024
canal.instance.memory.batch.mode=MEMSIZE

# 网络配置
canal.instance.receiving.buffer.size=16384
canal.instance.memory.rawEntry=true

# binlog 解析配置
canal.instance.parser.parallel=true
canal.instance.parser.parallelBufferSize=256

# binlog 位置记录模式
canal.instance.meta.manager.enable=false

# 心跳检查配置
canal.instance.detecting.enable=false
canal.instance.detecting.sql=select 1
canal.instance.detecting.interval.time=3
canal.instance.detecting.retry.threshold=3
canal.instance.detecting.heartbeatHaEnable=false

# 数据一致性配置
canal.instance.gtid.enable=false

# 字符集配置
canal.instance.filter.field.value.black.enable=false
canal.instance.filter.field.error.mode=WARN

# MQ 消息分区配置
canal.mq.partition=0
canal.mq.partitionsNum=1
canal.mq.partitionHash=.*\\.(.*)